## C语言用来创建空间小、速度快的程序

C语言旨在创建空间小、速度快的程序。它比其他大多数语言的抽象层次更低，也就是说C语言写的代码更加接近机器语言。

### 1、C语言的工作方式

1. 源代码

```
  #include <stdio.h>
  
  int main()
  { 
    puts("C Rocks");
    return 0;
  }
```

2. 编译

```
  gcc rocks.c -o rocks
```
3. 输出

```
  rocks (在Windows中，这个文件叫rocks.exe)
```

> 你可能会遇到三种C标准。ANSI C始于20世纪80年代后期，适用于最古老的代码；1999年开始的C99标准有了很大的改进；在2011年发布的最新标准C11中，加入了一些很酷、很新的语言特性。不同版本的标准之间差别不是很大，如果碰到我们会指出。

### 2、完整的C程序长啥样？

任何文本编辑器都可以创建C源文件，它们的文件名通常以.c结尾(虽然这只是惯例，但应该遵守。)。
我们来看一个典型的C源文件。

```
  /*
   * 计算盒中牌数量的程序
   * 本代码使用“拉斯维加斯公共许可证”。
   * (c)2014，学院21点扑克游戏小组。
   */
   #include <stdio.h>
   
   int main()
   {
      int decks;
      puts("请输入有几副牌");
      scanf("%i", &decks);
      if (decks < 1) {
         puts("无效的副数");
         return 1;
      }
      printf("一共有%i张牌\n", (decks*52));
      return 0;
   }
```

+ main()函数
```
  计算机会从main()函数开始运行程序。它的名字很重要，如果没有一个叫main()的函数，程序就无法启动。
  在早期ANSI C标准中，main()函数可以是void类型。但是在C99标准中main函数的返回类型必须是int。
  
  main()函数返回类型是int，因此必须在函数结束前包含一条return语句。即使不加，代码也能编译，但会收到编译器的警告。支持C99标准的编译器会在你忘记的时候插入一条return语句。如果你想让编译器遵循C99标准，可以使用-std=99选项。
  
  通常情况下main必须要有return，但只要把函数的返回类型声明为void，没有return也无妨。
  void complain() {
    puts(“The book ...”);
  }
  在void函数中的return语句有时可以用来提前退出函数。
```
+ printf()函数
```
  用于显示格式化输出，它用变量的值来替换格式符。
```

> 如果想检查程序的退出状态，可以在Windows命令提示符中输入: echo %ErrorLevel% 或者在Linux或Mac终端中输入: echo $?

### 3、如何运行程序

为了编译代码，需要一个叫*编译器*的程序。GNU编译器套件（GNU Compiler Collection）,也叫gcc,是最流行的C编译器之一。gcc可以在很多操作系统中使用，而且除了C语言，它还可以编译很多其它语言，最重要的是，它完全免费。

```
  除了C语言，gcc还可以编译C++和Objective-C,Pascal,Fortran,PL/I,Go等
```

在大部分机器中可以使用下面的技巧来编译并运行代码。

```
  gcc zork.c -o zork && ./zork
  在windows中应该是zork，而不是./zork
```
+ 字符串
```
  字符串只是字符数组，当C语言看到一个这样的字符串时：
  
    s = "Shatner"
    
  会把它当作一个数组读取，而这个数组是由一个个独立的字符组成：
  
    s = {'S', 'h', 'a', 't', 'n', 'e', 'r'}
    
  字符串中的每个字符是数组中的一个元素，这就是为什么可以通过索引来引用字符串中的某个字符，比如s[0]、s[1]。
  C语言为了知道什么时候到达字符数组的尾部，为此加入了哨兵字符。
  哨兵字符是一个出现在字符串末尾的附加字符，它的值为\0。也就是说在存储器中实际保存的是：
  
      S    h    a    t    n    e    r   \0
    s[0] s[1] s[2] s[3] s[4] s[5] s[6] s[7]
    
  \0是ASCII字符，它的值是0，C程序员通常叫它（NULL）字符。
  这也就是为什么我们要在代码中这样定义card_name变量:
  
    char card_name[3];
```
+ 数组的下标
```
  为什么从0开始，而不是从1？
    字符的索引值是一个偏移量：它表示当前要引用的这个字符到数组中的第一个字符之间有多少字符。
  
  为什么要这么做？
    计算机在存储器中以连续字节的形式保存字符，并利用索引计算出字符在存储器中的位置。
  
    如果计算机知道C[0]位于存储器1 000 000号单元，那么就可以很快计算出C[96]在 1 000 000 ＋ 96号单元。
```
+ 字符串字面值和字符数组
```
  有什么区别？
    只有一个区别：字符串字面值是常量。
  
  那是什么意思？
    也就是说这些字符一旦创建完毕，就不能再修改它们。
  
  如果我改了会怎样？
    这取决于编译器，gcc通常显示总线错误（bus error）。
  
  总线错误？那是什么东西？
    C语言采用不同的方式在存储器保存字符串字面值。总线错误意味着程序无法更新那一块存储器空间。
```
### 4、布尔运算

+ &&
+ ||
+ !

> ANSI C标准没有用来处理表示真和假的值，C程序把0这个值当作假处理，把0以外的任何值当作真处理。C99标准则允许在程序中使用true和false关键字。但编译器还是会把它们当作1和0这两个值来处理。

```
  为什么不能写一个|和&？
    也不是不行。&和|操作符总是计算两个条件，而&&和||可以跳过第二个条件。
    
  那还要|和&干嘛？
    对逻辑表达式求值只是它们的一个用处，它们还能对数字的某一位进行布尔运算。
  
  那是什么意思？
    6 & 4 等于4。是因为当对6（二进制110）和4（二进制100）的每个二进制布尔与时，就会得到4（二进制100）。
```
### 5、switch语句

```
  switch(train) {
    case 37:
      winnings = winnings + 50;
      break;
    case 65:
      puts("头等奖");
      winnings = winnings + 80;
      break;
    case 12:
      winnings = winnings + 20;
      break;
    default:
      winnings = 0;
  }
```
### 6、循环

+ while

```
  int counter = 1;
  while (counter < 11) {
    printf("%i个枣\n", counter);
    counter++;
  }
```
+ for
```
  int counter;
  for(counter = 1; counter < 11; counter++) {
      printf("%i个枣\n", counter);
  }
```
+ berek
```
  while (feeling_hungry) {
    eat_cake();
    if (feeling_queasy) {
      break; /* 从while循环中跳出 */
    }
    drink_coffee();
  }
  1990年1月15日，AT&T的长途电话系统死机，造成6万人无法使用电话服务。起因是一个负责写电路交换部分的C代码的开发人员企图用break从if语句中退出，但break不能从if语句中退出。相反，程序跳过来整段代码，引起了这个bug，令7千万次电话呼叫在9个多小时内无法接通。。。
```
+ continue
```
  while (feeling_hungry) {
    if (not_lunch_yet) {
      continue; /* 带你回到循环的开始 */
    }
    eat_cake();
  }
```
































